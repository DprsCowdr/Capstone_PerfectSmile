<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Admin Available Slots - Updated</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-8">
    <div class="max-w-4xl mx-auto">
        <h1 class="text-3xl font-bold mb-6">Test Admin Available Slots - Updated</h1>
        
        <!-- Mock calendar form with branch and service selects -->
        <div class="bg-white p-6 rounded-lg shadow-lg mb-6">
            <h2 class="text-xl font-semibold mb-4">Calendar Form (Mock)</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div>
                    <label class="block text-sm font-medium mb-2">Date</label>
                    <input type="date" name="date" value="2025-09-19" class="w-full border rounded px-3 py-2">
                </div>
                <div>
                    <label class="block text-sm font-medium mb-2">Branch</label>
                    <select name="branch" class="w-full border rounded px-3 py-2">
                        <option value="">Select Branch...</option>
                        <option value="1">Main Branch</option>
                        <option value="2">Downtown Branch</option>
                        <option value="3">Uptown Branch</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium mb-2">Service</label>
                    <select name="service_id" id="service_id" class="w-full border rounded px-3 py-2">
                        <option value="">Select Service...</option>
                        <option value="1">General Checkup</option>
                        <option value="2">Cleaning</option>
                        <option value="3">X-Ray</option>
                        <option value="4">Root Canal</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Available Slots Button and Menu -->
        <div class="bg-white p-6 rounded-lg shadow-lg">
            <div class="relative">
                <button id="availableSlotsBtn" 
                        class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm font-medium">
                    ðŸ“… Available Slots
                </button>
                
                <!-- Dropdown Menu -->
                <div id="availableSlotsMenu" 
                     class="hidden absolute top-full left-0 mt-2 w-96 bg-white rounded-md shadow-lg border border-gray-200 z-50">
                    <div id="availableSlotsMenuContent" class="p-4">
                        Click the button to load available slots...
                    </div>
                </div>
            </div>
        </div>

        <!-- Test Controls -->
        <div class="bg-gray-50 p-6 rounded-lg shadow-lg mt-6">
            <h3 class="text-lg font-semibold mb-4">Test Controls</h3>
            <div class="space-x-4">
                <button onclick="testWithEmptySelects()" class="bg-yellow-600 hover:bg-yellow-700 text-white px-4 py-2 rounded">
                    Test with Empty Selects
                </button>
                <button onclick="testWithSelectedValues()" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded">
                    Test with Selected Values
                </button>
                <button onclick="testConsoleOutput()" class="bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded">
                    Check Console Output
                </button>
            </div>
        </div>
    </div>

    <script>
        // Mock base URL
        const baseUrl = 'http://localhost:8080/';
        
        // Test functions
        function testWithEmptySelects() {
            console.log('=== Testing with empty selects ===');
            document.querySelector('select[name="branch"]').value = '';
            document.querySelector('select[name="service_id"]').value = '';
            console.log('Set branch and service to empty, now click Available Slots button');
        }
        
        function testWithSelectedValues() {
            console.log('=== Testing with selected values ===');
            document.querySelector('select[name="branch"]').value = '1';
            document.querySelector('select[name="service_id"]').value = '2';
            console.log('Set branch to 1 and service to 2, now click Available Slots button');
        }
        
        function testConsoleOutput() {
            console.log('=== Current form values ===');
            console.log('Date:', document.querySelector('input[name="date"]').value);
            console.log('Branch:', document.querySelector('select[name="branch"]').value);
            console.log('Service:', document.querySelector('select[name="service_id"]').value);
        }
    </script>
    
    <!-- Load the admin calendar JavaScript -->
    <script src="/js/calendar-admin.js"></script>
    <script>
        // Initialize the admin available slots menu when page loads
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Initializing admin available slots menu...');
            
            // Call the init function from calendar-admin.js
            if (typeof initAdminAvailableSlotsMenu === 'function') {
                initAdminAvailableSlotsMenu();
            } else {
                console.warn('initAdminAvailableSlotsMenu function not found');
            }
        });
    </script>
</body>
</html>